CREATE TABLE PROVINCIAS(
 ID_PROVINCIA INT(3) PRIMARY KEY,
 NOMBRE VARCHAR(50)
);

CREATE TABLE MUNICIPIOS(
 ID_MUNICIPIO INT(3) PRIMARY KEY,
 NOMBRE VARCHAR(50),
 ID_PROVINCIA INT(3),
 FOREIGN KEY (ID_PROVINCIA) REFERENCES PROVINCIAS (ID_PROVINCIA) ON DELETE SET NULL	
);

CREATE TABLE ESPACIOS_NATURALES(
 ID_ESPACIO INT(3) PRIMARY KEY,
 NOMBRE VARCHAR(50),
 DESCRIPCION VARCHAR(2000),
 TIPO VARCHAR(50),
 DIRECCION VARCHAR(50),
 CATEGORIA VARCHAR(50),
 LATITUD FLOAT (20,20),
 LONGITUD FLOAT (20,20)
);

CREATE TABLE MUNICIPIOS_ESPACIOS_NAT(
 ID_ESPACIO INT(3) NOT NULL,
 ID_MUNICIPIO INT(3) NOT NULL,
 PRIMARY KEY (ID_ESPACIO, ID_MUNICIPIO),
 FOREIGN KEY (ID_ESPACIO) REFERENCES ESPACIOS_NATURALES (ID_ESPACIO) ON DELETE CASCADE,
 FOREIGN KEY (ID_MUNICIPIO) REFERENCES MUNICIPIOS (ID_MUNICIPIO) ON DELETE CASCADE
) ENGINE=INNODB;

CREATE TABLE CENTROS_METEOROLOGICOS(
 ID_CENTRO_MET INT(3) PRIMARY KEY,
 ID_MUNICIPIO INT(3),
 NOMBRE VARCHAR(50), 
 DIRECCION VARCHAR(50),
 LATITUD FLOAT (20,20),
 LONGITUD FLOAT (20,20),
 FOREIGN KEY (ID_MUNICIPIO) REFERENCES MUNICIPIOS (ID_MUNICIPIO) ON DELETE SET NULL	
);

CREATE TABLE MEDICIONES_CENTRO_MET(
 ID_CENTRO_MET INT(3),
 FECHA DATE,
 HORA TIME(2),
 COMGM3 FLOAT (3,2),
 CO8HMGM3 FLOAT (3,2),
 NOGM3 FLOAT (3,2),
 NO2 FLOAT (3,2),
 NO2ICA VARCHAR(50),
 NOXGM3 FLOAT (3,2),
 PM10 FLOAT (3,2),
 PM10ICA VARCHAR(50),
 PM25 FLOAT (3,2),
 PM25ICA VARCHAR(50),
 SO2 FLOAT (3,2),
 SO2ICA VARCHAR(50),
 ICA_ESTACION VARCHAR(50),
 FOREIGN KEY (ID_CENTRO_MET) REFERENCES CENTROS_METEOROLOGICOS (ID_CENTRO_MET) ON DELETE CASCADE,
 PRIMARY KEY (ID_CENTRO_MET, FECHA, HORA)

);

CREATE TABLE FUENTES(
 ID INT(3) PRIMARY KEY,
 FORMATO VARCHAR(5), 
 NOMBRE VARCHAR(50),
 URL VARCHAR(150),
 HASH VARCHAR(64)
);

CREATE TABLE CLIENTES(
 ID_CLIENTE INT(3) PRIMARY KEY,
 USUARIO VARCHAR(30),
 PASSWD VARCHAR(30)
);

